class Calc{constructor(preButton,curButton){this.preButton=preButton; this.curButton=curButton;this.clear();}clear(){this.cur='';this.pre='';this.operation=undefined;}delete(){this.cur=this.cur.toString().slice(0,-1)};appendNumber(number){if(number==='.'&&this.cur.includes('.'))return; this.cur=this.cur.toString()+number.toString();};chooseOperation(operation){if(this.cur==='')return;if(this.pre!==''){this.compute()}; this.operation=operation;this.pre=this.cur;this.cur='';};compute(){let computation;const prev=parseFloat(this.pre);const curr=parseFloat(this.cur);if(isNaN(prev)||isNaN(curr))return;switch(this.operation){case '+':computation=prev+curr;break;case '-':computation=prev-curr;break;case 'ร':computation=prev*curr;break;case 'รท':computation=prev/curr;break;default:return;}this.cur=computation;this.operation=undefined;this.pre=''};getDisplayNumber(number){const stringNumber=number.toString();const integerDigits=parseFloat(stringNumber.split('.')[0]);const decimalDigits=(stringNumber.split('.')[1]);let integerDisplay;if(isNaN(integerDigits)){integerDisplay=''}else{integerDisplay=integerDigits.toLocaleString('en',{maximumFractionDigits:0})}if(decimalDigits!=null){return `${integerDisplay}.${decimalDigits}`;}else{return integerDisplay;}};updateDisplay(){this.curButton.innerText=this.getDisplayNumber(this.cur);if(this.operation!=null){this.preButton.innerText=`${this.getDisplayNumber(this.pre)}${this.operation}`;}else{this.preButton.innerText=''}}};
const numbButtons=document.querySelectorAll('[data-number]');const opButtons=document.querySelectorAll('[data-operation]');const equalsButton=document.querySelector('[data-equals]');const deleteButton=document.querySelector('[data-delete]');const clearButton=document.querySelector('[data-all-clear]');const preButton=document.querySelector('[data-pre]');const curButton=document.querySelector('[data-cur]');const calculator=new Calc(preButton,curButton);numbButtons.forEach(button=>{button.addEventListener('click',()=>{calculator.appendNumber(button.innerText);calculator.updateDisplay()})});opButtons.forEach(button=>{button.addEventListener('click',()=>{calculator.chooseOperation(button.innerText);calculator.updateDisplay()})});equalsButton.addEventListener('click',button=>{calculator.compute();calculator.updateDisplay()});clearButton.addEventListener('click',button=>{calculator.clear();calculator.updateDisplay()});deleteButton.addEventListener('click',button=>{calculator.delete();calculator.updateDisplay()});